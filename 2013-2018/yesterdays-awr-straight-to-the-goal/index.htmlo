This was first published on <a href=https://blog.dbi-services.com/yesterdays-awr-straight-to-the-goal>https://blog.dbi-services.com/yesterdays-awr-straight-to-the-goal</a> (2015-04-14)
								<h1 class="entry-title">Yesterday&#8217;s AWR Straight to the Goal</h1>
		<div class="content-inner">
			
						
						
		   
			<p>Yesterday I was a speaker at Collaborate15 and did my presentation about reading an AWR report. That was great. Many people (and not enough seats).</p>
<p>Here are some aswers about questions that came later.</p>
<p>I did that presentation at DOAG last year in a much bigger room. But because of the bigger room there was no questions, and because of the tension I felt in that big room, I made it too fast. Yesterday&#8217;s was better in my opinion, able to cover everything, including questions, in one hour.</p>
<p>I was a bit surprised by the number of people having Diagnostic Pack. About 50%. This is not the case with my customers. Probably there are biggest companies in US that can affort higher licence costs.</p>
<p>Anyway some people are in EE without Diagnostic Pack, or in SE and they run Statspack. I said that they can do exacltly the same approach as long as the take level 7 statspack reports.</p>
<h3>Statspack level</h3>
<p>How do you set it? Here is how to do after installing Statspack:</p>
<pre class="brush: sql; gutter: true; first-line: 1">SQL&gt; exec STATSPACK.MODIFY_STATSPACK_PARAMETER (i_snap_level=&gt;7, i_modify_parameter=&gt;'true', i_instance_number=&gt;null);</pre>
<p>If you are in RAC, just do the same for each instance, with the right instance number.</p>
<p>There is a warning I always add when I give our <a href="https://blog.dbi-services.com/yesterdays-awr-straight-to-the-goal/index.php/products/dbi-insite-workshops/oracle-performance-tuning-training">tuning workshop</a> : if you do it afterwards, please run one snapshot just to check there is no problem. From my experience, I have seen the following issues:</p>
<ul>
<li>System swapiness was configured high. The instance was quite idle, so a big part of the shared pool had been swapped. The level 7 snapshot has to read lot of cursor and execution plan information from shared pool and then the system is stuck for a while, bringing all that back in memory. The solution: configure the instance properly (swapiness=0)</li>
<li>No automatic stats gathering were done on PERFSTAT schema. Bad statistics made the insert into STATS$SQL_PLAN very bad. Solution: gather statistics properly.</li>
</ul>
<p>Besides that, I don&#8217;t see know any problem having level 7 as the default. It adds segment statistics and it adds execution plan.</p>
<h3>Predicates in explain plan</h3>
<p>I said that predicates are missing in the plans. <a href="https://blog.dbi-services.com/awr-dont-store-explain-plan-predicates">Here</a> is the reason. And &#8211; maybe &#8211; <a href="https://community.oracle.com/ideas/2494">here</a> is a way to have that fixed one day. Please vote up for that idea on OTN.</p>
<h3>Presentation material</h3>
<p>Some people that were not at IOUG Collaborate have asked if the presentation is public. Not yet. I&#8217;ve submitted it for other events this year, so it cannot be public. But maybe you can try to drop me a mail.
People being there can download the pdf and white paper from <a href="http://coll15.mapyourshow.com/6_0/sessions/session-details.cfm?ScheduleID=3535">here</a>.</p>
<h3>Get deeper</h3>
<p>You want to go further than the AWR report? You can query AWR views.
Learn that at Maris Elsins session today: <a href="http://coll15.mapyourshow.com/6_0/sessions/session-details.cfm?ScheduleID=3548">Mining the AWR: Alternative Methods for Identification of the Top SQLs in Your Database</a></p>
<h3>Conclusion</h3>
<p>Please, don&#8217;t forget to give feedback from the Collaborate app.
Thanks a lot to the attendees, as well as the IOUG Forum organisation.</p>
<blockquote class="twitter-tweet" lang="en"><p>6 minutes to go and the room is already full for <a href="https://twitter.com/FranckPachot">@FranckPachot</a>! Congrats <a href="http://t.co/jHY7n9Po0P">pic.twitter.com/jHY7n9Po0P</a></p>
<p>— Ludovico Caldara (@ludodba) <a href="https://twitter.com/ludodba/status/587758341323001857">April 13, 2015</a></p></blockquote>
<table class="rw-rating-table rw-ltr rw-left rw-no-labels"><tr><td><nobr>&nbsp;</nobr></td><td><div class="rw-left"><div class="rw-ui-container rw-class-blog-post rw-urid-6160"></div></div></td></tr></table>							
		</div><!--/content-inner-->
<div class="comment-wrap ">

	<h3 id="comments"> 6 Comments</h3>

	<div class="navigation">
		<div class="alignleft"></div>
		<div class="alignright"></div>
	</div>

	<ul class="comment-list ">
				<li class="comment even thread-even depth-1" id="comment-1442">
				<div id="div-comment-1442" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/b9f24fc1094ffb4fcdbd18c55b74c7e6?s=60&amp;d=https%3A%2F%2Fsecure.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&amp;r=G' class='avatar avatar-60 photo' height='60' width='60' />			<cite class="fn">Rogê Gonçalves</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="index.html#comment-1442">
			April 25, 2015 at 11 h 15 min</a>		</div>

		<p>Good Morning Frank,</p>
<p>I live in Brazil and i would like to receive the presentation material about Interpreting AWR Reports. I searched for your email but i didn&#8217;t find.</p>
<p>I subscribe to your posts and thank you for always post. I am learning a lot.</p>
<p>Regards
<table class="rw-rating-table rw-ltr rw-left rw-no-labels">
<tr>
<td><nobr>&nbsp;</nobr></td>
<td>
<div class="rw-left">
<div class="rw-ui-container rw-class-comment rw-urid-14431"></div>
</div>
</td>
</tr>
</table>

		<div class="reply"><a class='comment-reply-link' href='index.html#comment-1442' onclick='return addComment.moveForm( "div-comment-1442", "1442", "respond", "615" )' aria-label='Reply to Rogê to Rogê Gonçalves'>Reply to Rogê</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-franck-pachot bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-1443">
				<div id="div-comment-1443" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/9c04a89267afa42e63eeb3d620f4b873?s=60&amp;d=https%3A%2F%2Fsecure.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&amp;r=G' class='avatar avatar-60 photo' height='60' width='60' />			<cite class="fn"><a href='http://www.dbi-services.com/Blog' rel='external nofollow' class='url'>Franck Pachot</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="index.html#comment-1443">
			April 27, 2015 at 6 h 59 min</a>		</div>

		<p>Hi Rogê,
Thanks for your comment. You can send me your e-mail address at <a href="mailto:franck.pachot@dbi-services.com">franck.pachot@dbi-services.com</a> and I&#8217;ll share the Prezi presentation.
Regards,
Franck.
<table class="rw-rating-table rw-ltr rw-left rw-no-labels">
<tr>
<td><nobr>&nbsp;</nobr></td>
<td>
<div class="rw-left">
<div class="rw-ui-container rw-class-comment rw-urid-14441"></div>
</div>
</td>
</tr>
</table>

		<div class="reply"><a class='comment-reply-link' href='index.html#comment-1443' onclick='return addComment.moveForm( "div-comment-1443", "1443", "respond", "615" )' aria-label='Reply to Franck to Franck Pachot'>Reply to Franck</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1457">
				<div id="div-comment-1457" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/6e60e069ce5c4aeb091ff2ad415717f0?s=60&amp;d=https%3A%2F%2Fsecure.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&amp;r=G' class='avatar avatar-60 photo' height='60' width='60' />			<cite class="fn">Satish</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="index.html#comment-1457">
			May 26, 2015 at 6 h 48 min</a>		</div>

		<p>Hi Frank,
Your articles have been very informative and of a timely help to the DBA community grappling with time, to search for a reliable and authentic information.</p>
<p>May I please have access to the ppt materials and white paper on &#8220;Interpreting AWR Reports&#8221;
Regards,
Satish
<table class="rw-rating-table rw-ltr rw-left rw-no-labels">
<tr>
<td><nobr>&nbsp;</nobr></td>
<td>
<div class="rw-left">
<div class="rw-ui-container rw-class-comment rw-urid-14581"></div>
</div>
</td>
</tr>
</table>

		<div class="reply"><a class='comment-reply-link' href='index.html#comment-1457' onclick='return addComment.moveForm( "div-comment-1457", "1457", "respond", "615" )' aria-label='Reply to Satish to Satish'>Reply to Satish</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-franck-pachot bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-1458">
				<div id="div-comment-1458" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/9c04a89267afa42e63eeb3d620f4b873?s=60&amp;d=https%3A%2F%2Fsecure.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&amp;r=G' class='avatar avatar-60 photo' height='60' width='60' />			<cite class="fn"><a href='http://www.dbi-services.com/Blog' rel='external nofollow' class='url'>Franck Pachot</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="index.html#comment-1458">
			May 26, 2015 at 7 h 06 min</a>		</div>

		<p>Hi Satish,
Thanks for your feedback.
You should have access to it on prezi.com with the e-mail you have sent to me.
Regards,
Franck.
<table class="rw-rating-table rw-ltr rw-left rw-no-labels">
<tr>
<td><nobr>&nbsp;</nobr></td>
<td>
<div class="rw-left">
<div class="rw-ui-container rw-class-comment rw-urid-14591"></div>
</div>
</td>
</tr>
</table>

		<div class="reply"><a class='comment-reply-link' href='index.html#comment-1458' onclick='return addComment.moveForm( "div-comment-1458", "1458", "respond", "615" )' aria-label='Reply to Franck to Franck Pachot'>Reply to Franck</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-4077">
				<div id="div-comment-4077" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/96bd0bdcd49292f3e16a7078c09894ed?s=60&amp;d=https%3A%2F%2Fsecure.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&amp;r=G' class='avatar avatar-60 photo' height='60' width='60' />			<cite class="fn"><a href='http://www.fabioprado.net' rel='external nofollow' class='url'>Fábio</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="index.html#comment-4077">
			July 25, 2016 at 14 h 51 min</a>		</div>

		<p>Hi Franck,</p>
<p>Wich I can use to calculate % Usage CPU: CPUs or Cores? There are many controversies about it.
<table class="rw-rating-table rw-ltr rw-left rw-no-labels">
<tr>
<td><nobr>&nbsp;</nobr></td>
<td>
<div class="rw-left">
<div class="rw-ui-container rw-class-comment rw-urid-40781"></div>
</div>
</td>
</tr>
</table>

		<div class="reply"><a class='comment-reply-link' href='index.html#comment-4077' onclick='return addComment.moveForm( "div-comment-4077", "4077", "respond", "615" )' aria-label='Reply to Fábio to Fábio'>Reply to Fábio</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-franck-pachot bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-4083">
				<div id="div-comment-4083" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/9c04a89267afa42e63eeb3d620f4b873?s=60&amp;d=https%3A%2F%2Fsecure.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&amp;r=G' class='avatar avatar-60 photo' height='60' width='60' />			<cite class="fn"><a href='https://www.linkedin.com/in/franckpachot' rel='external nofollow' class='url'>Franck Pachot</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="index.html#comment-4083">
			July 25, 2016 at 16 h 12 min</a>		</div>

		<p>Hi Fabio,
If you want to see the threads utilization, then use the number of cpus given by the OS. But you should know that 100% cannot be reached and that you may already have contention on physical processor even when some threads are idle.
If you want to see the physical processor utilisation, then use the cores. But then, you should know that for some workloads it&#8217;s not abnormal to see higher values than 100%
The efficiency of hyper-threading depends on the workload (access to RAM or compute in CPU) so the optimal percentage, whatever the calculation is, the &#8216;good&#8217; value depends on the type of workload.
Personally, I prefer to compare with physical cores because I&#8217;ve seen too many people thinking their system is not overloaded because they see a few %idle.
Regards,
Franck.
<table class="rw-rating-table rw-ltr rw-left rw-no-labels">
<tr>
<td><nobr>&nbsp;</nobr></td>
<td>
<div class="rw-left">
<div class="rw-ui-container rw-class-comment rw-urid-40841"></div>
</div>
</td>
</tr>
</table>

		<div class="reply"><a class='comment-reply-link' href='index.html#comment-4083' onclick='return addComment.moveForm( "div-comment-4083", "4083", "respond", "615" )' aria-label='Reply to Franck to Franck Pachot'>Reply to Franck</a></div>
				</div>
		</li><!-- #comment-## -->
	</ul>

 

								<div id="respond" class="comment-respond">
